# ğŸ¨ Resumen Visual: GestiÃ³n de Perfil del Empleado

## ğŸ“ Flujo de Datos Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + TS)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  /profile (ProfilePage.tsx)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  useEffect(() => cargarPerfil())                           â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  obtenerPerfil() â†’ GET /api/empleados/perfil              â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  setProfile(data)  [Muestra datos en pantalla]            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  [Usuario hace clic en "Editar Perfil"]                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  handleEditClick()                                          â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  setIsEditMode(true)                                       â”‚        â”‚
â”‚  â”‚  setTempProfile({...profile})  [Copia datos actuales]     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  [Usuario modifica datos y guarda]                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  handleSaveEdit()                                          â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  actualizarPerfil(tempProfile)                            â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  PUT /api/empleados/perfil                                â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  setProfile(updatedData)  [Actualiza UI]                  â”‚        â”‚
â”‚  â”‚  setIsEditMode(false)                                      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Quarkus + Clean Architecture)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  EmpleadoController.java                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  GET /api/empleados/perfil                                 â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  obtenerPerfilEmpleadoUseCase.execute()                   â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  Response.ok(perfil)                                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  PUT /api/empleados/perfil                                 â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  actualizarPerfilEmpleadoUseCase.execute(request)         â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  Response.ok(perfilActualizado)                           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USE CASES (Application Layer)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ObtenerPerfilEmpleadoUseCase.java                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  1. currentUserProvider.getIdEmpleado()                    â”‚        â”‚
â”‚  â”‚     â†“ [Extrae ID del JWT]                                  â”‚        â”‚
â”‚  â”‚  2. empleadoRepository.buscarPorId(idEmpleado)             â”‚        â”‚
â”‚  â”‚     â†“ [Busca en BD con relaciones]                         â”‚        â”‚
â”‚  â”‚  3. mapToResponse(empleado)                                â”‚        â”‚
â”‚  â”‚     â†“ [Incluye Cargo, Departamento, Empresa]               â”‚        â”‚
â”‚  â”‚  4. return PerfilEmpleadoResponse                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  ActualizarPerfilEmpleadoUseCase.java                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  1. currentUserProvider.getIdEmpleado()                    â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  2. empleadoRepository.buscarPorId(idEmpleado)             â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  3. Validar correo Ãºnico (si cambiÃ³)                       â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  4. empleado.setNombre/Apellido/Correo/Telefono()          â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  5. empleadoRepository.update(empleado)                    â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  6. return PerfilEmpleadoResponse                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REPOSITORY (Infrastructure Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  EmpleadoRepositoryImpl.java                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  buscarPorId(Long id)                                      â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  findByIdOptional(id)  [Panache]                           â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  return Optional<Empleado>  [Con relaciones LAZY]          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  update(Empleado empleado)                                 â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  getEntityManager().merge(empleado)                        â”‚        â”‚
â”‚  â”‚     â†“                                                       â”‚        â”‚
â”‚  â”‚  return Empleado  [Persistido en BD]                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BASE DE DATOS (Oracle)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  SELECT e.*, c.nombre, d.nombre_depart, emp.nombre_empresa              â”‚
â”‚  FROM Empleado e                                                         â”‚
â”‚  LEFT JOIN Cargo c ON e.id_cargo = c.id_cargo                           â”‚
â”‚  LEFT JOIN Departamento d ON e.id_departamento = d.id_departamento      â”‚
â”‚  LEFT JOIN Empresa emp ON e.id_empresa = emp.id_empresa                 â”‚
â”‚  WHERE e.id_empleado = ?                                                 â”‚
â”‚                                                                          â”‚
â”‚  UPDATE Empleado                                                         â”‚
â”‚  SET nombre = ?, apellido = ?, correo = ?, telefono = ?                 â”‚
â”‚  WHERE id_empleado = ?                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Estructura de Archivos

```
BackEnd/quarkus-api/src/main/java/datum/travels/
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ dto/empleado/
â”‚   â”‚   â”œâ”€â”€ PerfilEmpleadoResponse.java         âœ… NUEVO
â”‚   â”‚   â””â”€â”€ ActualizarPerfilRequest.java        âœ… NUEVO
â”‚   â”‚
â”‚   â””â”€â”€ usecase/empleado/
â”‚       â”œâ”€â”€ ObtenerPerfilEmpleadoUseCase.java   âœ… NUEVO
â”‚       â””â”€â”€ ActualizarPerfilEmpleadoUseCase.java âœ… NUEVO
â”‚
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ Empleado.java                       ğŸ“ Ya existÃ­a
â”‚   â”‚   â”œâ”€â”€ Cargo.java                          ğŸ“ Ya existÃ­a
â”‚   â”‚   â”œâ”€â”€ Departamento.java                   ğŸ“ Ya existÃ­a
â”‚   â”‚   â””â”€â”€ Empresa.java                        ğŸ“ Ya existÃ­a
â”‚   â”‚
â”‚   â””â”€â”€ repository/
â”‚       â””â”€â”€ EmpleadoRepository.java             ğŸ”§ MODIFICADO (+ update)
â”‚
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapter/
    â”‚   â”œâ”€â”€ persistence/
    â”‚   â”‚   â””â”€â”€ EmpleadoRepositoryImpl.java     ğŸ”§ MODIFICADO (+ update)
    â”‚   â”‚
    â”‚   â””â”€â”€ rest/
    â”‚       â””â”€â”€ EmpleadoController.java         ğŸ”§ MODIFICADO (+ 2 endpoints)
    â”‚
    â””â”€â”€ shared/util/
        â””â”€â”€ CurrentUserProvider.java            ğŸ“ Ya existÃ­a

FrontEnd/frontend/src/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ empleados.ts                            ğŸ”§ MODIFICADO (+ 2 funciones)
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ empleado.ts                             ğŸ”§ MODIFICADO (+ 2 interfaces)
â”‚
â””â”€â”€ pages/
    â””â”€â”€ profile.tsx                              ğŸ”§ MODIFICADO (completamente)
```

**Leyenda:**
- âœ… NUEVO: Archivo creado desde cero
- ğŸ”§ MODIFICADO: Archivo existente con cambios
- ğŸ“ Ya existÃ­a: Usado sin modificaciones

---

## ğŸ”„ Diagrama de Secuencia: Actualizar Perfil

```
Usuario       Frontend          Backend API       UseCase        Repository      Base de Datos
  â”‚               â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚â”€â”€â”€ Click â”€â”€â”€>â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚  "Guardar"   â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚â”€â”€ PUT /perfil â”€â”€â”€>â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚  + JWT Token      â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚  + Payload        â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚â”€â”€â”€ execute() â”€â”€>             â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚â”€â”€ getIdEmpleado() [JWT]         â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚â”€â”€ buscarPorId() â”€â”€>             â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚â”€â”€â”€ SELECT â”€â”€â”€â”€>â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚<â”€â”€â”€ Empleado â”€â”€â”‚
  â”‚              â”‚                   â”‚              â”‚<â”€â”€â”€ Optional<Empleado>          â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚â”€â”€ validar correo Ãºnico          â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚â”€â”€ update(empleado) â”€â”€â”€>         â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚â”€â”€â”€ UPDATE â”€â”€â”€>â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚<â”€â”€â”€ OK â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚              â”‚                   â”‚              â”‚<â”€â”€â”€ Empleado actualizado        â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚<â”€â”€â”€ Response â”€â”€â”€             â”‚                 â”‚
  â”‚              â”‚<â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚  PerfilEmpleado   â”‚              â”‚               â”‚                 â”‚
  â”‚              â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚<â”€â”€â”€ UI â”€â”€â”€â”€â”€â”‚                   â”‚              â”‚               â”‚                 â”‚
  â”‚  Actualizada â”‚                   â”‚              â”‚               â”‚                 â”‚
```

---

## ğŸ¯ Componentes Clave

### **1. CurrentUserProvider** (Shared/Util)
```java
@Inject JsonWebToken jwt;
@Inject UsuarioRepository usuarioRepository;

public Optional<Long> getIdEmpleado() {
    String keycloakId = jwt.getSubject();
    return usuarioRepository
        .findByKeycloakId(keycloakId)
        .map(Usuario::getIdEmpleado);
}
```

### **2. EmpleadoRepository** (Domain)
```java
Optional<Empleado> buscarPorId(Long idEmpleado);
Optional<Empleado> findByCorreo(String correo);
Empleado update(Empleado empleado);
```

### **3. PerfilEmpleadoResponse** (Application/DTO)
```java
{
  "idEmpleado": 1,
  "nombre": "Carlos",
  "apellido": "MartÃ­nez",
  "correo": "carlos.martinez@datum.com",
  "telefono": "+503 7123 4567",
  "cargo": "Desarrollador Senior",      // De relaciÃ³n ManyToOne
  "departamento": "TecnologÃ­a",          // De relaciÃ³n ManyToOne
  "empresa": "Datum Travels"             // De relaciÃ³n ManyToOne
}
```

---

## ğŸ”’ Validaciones Implementadas

### Backend:
```java
âœ… @NotBlank nombre, apellido, correo
âœ… @Email correo
âœ… @Size(max = 50) todos los campos
âœ… ValidaciÃ³n de correo Ãºnico en BD
âœ… ValidaciÃ³n de empleado existente
âœ… Solo el empleado autenticado puede editar su perfil
```

### Frontend:
```typescript
âœ… ValidaciÃ³n de formato de correo (input type="email")
âœ… Campos obligatorios (nombre, apellido, correo)
âœ… Manejo de errores de red
âœ… Feedback visual de loading y errores
âœ… ConfirmaciÃ³n visual de cambios guardados
```

---

**Creado**: Noviembre 2, 2025  
**Arquitectura**: Clean Architecture (Quarkus + React)
